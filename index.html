<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Para Daniela, la dueña de mi corazón</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        background: #fddde6;
        font-family: "Arial", sans-serif;
        overflow: hidden;
      }

      .container {
        position: relative;
        width: 100vw;
        height: 100vh;
      }

      #treeCanvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }

      .message {
        position: absolute;
        top: 10%;
        left: 10%;
        width: 80%;
        color: #7a3b69;
        font-size: 1.5em;
        text-shadow: 1px 1px 2px #fff;
        background-color: rgba(255, 255, 255, 0.4);
        padding: 10px;
        border-radius: 15px;
      }

      .timer {
        margin-top: 20px;
        font-size: 1em;
        color: #333;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <canvas id="treeCanvas"></canvas>
      <div class="message">
        <p id="typewriter"></p>
        <p class="timer" id="timer"></p>
      </div>
    </div>

    <script>
      const text = `Para el amor de mi vida:\n
          Si te digo que te amo es porque realmente te amo,\n
          Si te digo que te quiero es porque no puedo vivir sin ti.\n
          Eres mi complemento perfecto, mi media naranja, mi otra mitad, mi amor\n
          Eres la persona que siempre he buscado, el amor que siempre he anhelado.\n
          — TE AMO MUCHO`;

      let index = 0;
      const typewriterElement = document.getElementById("typewriter");

      function typeWriter() {
        if (index < text.length) {
          typewriterElement.innerHTML +=
            text.charAt(index) === "\n" ? "<br>" : text.charAt(index);
          index++;
          setTimeout(typeWriter, 40);
        }
      }
      typeWriter();

      // Timer
      const startDate = new Date();
      startDate.setFullYear(startDate.getFullYear() - 1);

      function updateTimer() {
        const now = new Date();
        const diff = now - startDate;
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
        const minutes = Math.floor((diff / (1000 * 60)) % 60);
        const seconds = Math.floor((diff / 1000) % 60);
      }
      setInterval(updateTimer, 1000);
      updateTimer();

      // Canvas para corazones cayendo
      const canvas = document.getElementById("treeCanvas");
      const ctx = canvas.getContext("2d");

      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
      }
      resizeCanvas();
      window.addEventListener("resize", resizeCanvas);

      // Dibujar un corazón
      function drawHeart(x, y, size, color) {
        ctx.save();
        ctx.beginPath();
        ctx.translate(x, y);
        ctx.scale(size, size);
        ctx.moveTo(0, 0);
        ctx.bezierCurveTo(0, -3, -5, -3, -5, 0);
        ctx.bezierCurveTo(-5, 3, 0, 5, 0, 8);
        ctx.bezierCurveTo(0, 5, 5, 3, 5, 0);
        ctx.bezierCurveTo(5, -3, 0, -3, 0, 0);
        ctx.closePath();
        ctx.fillStyle = color;
        ctx.fill();
        ctx.restore();
      }

      let fallingHearts = [];

      // Generar muchos corazones cayendo
      function generateFallingHearts() {
        fallingHearts = [];
        for (let i = 0; i < 100; i++) {
          // ahora más corazones
          fallingHearts.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            size: Math.random() * 1.2 + 0.8, // corazones más grandes
            speedY: Math.random() * 1.5 + 0.5,
            speedX: (Math.random() - 0.5) * 0.5,
            color: `hsl(${Math.random() * 360}, 70%, 70%)`,
          });
        }
      }
      generateFallingHearts();

      // Animación
      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Dibujar y mover corazones cayendo
        for (let heart of fallingHearts) {
          drawHeart(heart.x, heart.y, heart.size, heart.color);
          heart.y += heart.speedY;
          heart.x += heart.speedX;
          if (heart.y > canvas.height) {
            heart.y = -10;
            heart.x = Math.random() * canvas.width;
          }
          if (heart.x > canvas.width || heart.x < 0) {
            heart.x = Math.random() * canvas.width;
            heart.y = -10;
          }
        }

        requestAnimationFrame(animate);
      }
      animate();
    </script>
  </body>
</html>
